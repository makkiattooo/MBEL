# MBEL: å…¬å¼å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.2.0
**æ—¥ä»˜:** 2026å¹´1æœˆ

---

## ğŸ“– ç›®æ¬¡

1.  [ã¯ã˜ã‚ã«](#1-ã¯ã˜ã‚ã«)
2.  [MBEL è¨€èª](#2-mbel-è¨€èª)
    *   [ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ](#21-ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ )
    *   [ãƒ‡ãƒ¼ã‚¿å‹](#22-ãƒ‡ãƒ¼ã‚¿å‹)
    *   [è£œé–“ã¨å¤‰æ•°](#23-è£œé–“ã¨å¤‰æ•°)
    *   [ãƒ­ã‚¸ãƒƒã‚¯ã¨åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼](#24-ãƒ­ã‚¸ãƒƒã‚¯ã¨åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼)
3.  [CLI ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³](#3-cli-ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³)
4.  [Go SDK ã®çµ±åˆ](#4-go-sdk-ã®çµ±åˆ)

---

## 1. ã¯ã˜ã‚ã«

Modern Billed-English Language (MBEL) ã¯ã€AIæ™‚ä»£ã®ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸæ¬¡ä¸–ä»£ã®ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

---

## 2. MBEL è¨€èª

### 2.1 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```mbel
@namespace: "features.auth"  # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

[ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢]               # ã‚»ã‚¯ã‚·ãƒ§ãƒ³

title = "ãƒ­ã‚°ã‚¤ãƒ³"           # ä»£å…¥
```

### 2.2 ãƒ‡ãƒ¼ã‚¿å‹

*   **æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«**: äºŒé‡å¼•ç”¨ç¬¦ã§å›²ã¿ã¾ã™ã€‚
*   **è¤‡æ•°è¡Œæ–‡å­—åˆ—**: ä¸‰é‡å¼•ç”¨ç¬¦ `"""` ã§å›²ã¿ã¾ã™ã€‚

### 2.3 è£œé–“ã¨å¤‰æ•°

å¤‰æ•°ã¯æ³¢æ‹¬å¼§ `{}` ã§å›²ã¿ã¾ã™ã€‚

*   **æ§‹æ–‡**: `ã“ã‚“ã«ã¡ã¯ã€{user_name}ã•ã‚“ï¼`

### 2.4 ãƒ­ã‚¸ãƒƒã‚¯ã¨åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼

**æ§‹æ–‡:** `key(variable) { cases }`

#### å®Œå…¨ä¸€è‡´
```mbel
theme(mode) {
    [dark]  => "ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰"
    [light] => "ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰"
}
```

#### ç¯„å›²ä¸€è‡´
```mbel
battery(percent) {
    [0]       => "ç©º"
    [1-19]    => "ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡ä½ä¸‹"
    [100]     => "æº€å……é›»"
}
```

#### è¤‡æ•°å½¢
æ—¥æœ¬èªã«ã¯æ–‡æ³•çš„ãªè¤‡æ•°å½¢å¤‰åŒ–ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ­ã‚¸ãƒƒã‚¯ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦æ•°å€¤ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚é€šå¸¸ã€`[other]` ãƒ«ãƒ¼ãƒ«ã®ã¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```mbel
items_ja(n) {
    [other] => "{n} å€‹ã®ã‚¢ã‚¤ãƒ†ãƒ "
}
```

---

## 3. ãªãœ MBEL ãªã®ã‹ï¼Ÿï¼ˆå®Ÿéš›ã®æ¯”è¼ƒï¼‰

ã¾ã  JSON ã§ååˆ†ã ã¨æ€ã£ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ å˜ç´”ãªãƒ­ã‚¸ãƒƒã‚¯ + è£œé–“ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

#### âŒ JSON æ–¹å¼ï¼ˆç…©é›‘ï¼‰
```json
{
  "cart_items_other": "ã‚«ãƒ¼ãƒˆã« {{count}} å€‹ã®å•†å“ãŒã‚ã‚Šã¾ã™ã€‚",
  "greeting_male": "ãŠå¸°ã‚Šãªã•ã„ã€{{name}} æ§˜",
  "greeting_female": "ãŠå¸°ã‚Šãªã•ã„ã€{{name}} æ§˜"
}
```
*ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡æ•°ã®ã‚­ãƒ¼ã«åˆ†æ•£ã—ã¦ã„ã¾ã™ã€‚Go/JS ã‚³ãƒ¼ãƒ‰ã¯ã©ã®ã‚­ãƒ¼ã‚’å–å¾—ã™ã‚‹ã‹ã‚’åˆ¤æ–­ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚*

#### âœ… MBEL æ–¹å¼ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ï¼‰
```mbel
cart_items(n) {
    [other] => "ã‚«ãƒ¼ãƒˆã« {n} å€‹ã®å•†å“ãŒã‚ã‚Šã¾ã™ã€‚"
}

greeting(gender) {
    [male]   => "ãŠå¸°ã‚Šãªã•ã„ã€{name} æ§˜"
    [female] => "ãŠå¸°ã‚Šãªã•ã„ã€{name} æ§˜"
}
```
*1ã¤ã®ã‚­ãƒ¼ã€ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ­ã‚¸ãƒƒã‚¯ã€‚ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒè¤‡é›‘ãªå‡¦ç†ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã™ã€‚*

---

## 4. æ§‹æ–‡ã‚¬ã‚¤ãƒ‰

### 4.1 åŸºæœ¬ã‚­ãƒ¼
å˜ç´”ãªã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ã§ã™ã€‚

```mbel
title = "ç§ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"
```

### 4.2 è£œé–“ vs ãƒ­ã‚¸ãƒƒã‚¯å¤‰æ•°
é‡è¦ãªé•ã„ï¼š
1.  **åˆ¶å¾¡å¤‰æ•°**: `key(var)` å†…ã®å¤‰æ•°ã€‚ã©ã®ã‚±ãƒ¼ã‚¹ã‚’é¸æŠã™ã‚‹ã‹ã‚’æ±ºå®šã—ã¾ã™ã€‚
2.  **è£œé–“å¤‰æ•°**: `{var}` å†…ã®å¤‰æ•°ã€‚å˜ã«ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚

```mbel
# 'gender' ã¯åˆ¶å¾¡å¤‰æ•°
# '{name}' ã¯è£œé–“å¤‰æ•°
greeting(gender) {
    [male]   => "ã“ã‚“ã«ã¡ã¯ã€{name} æ§˜"
    [female] => "ã“ã‚“ã«ã¡ã¯ã€{name} æ§˜"
}
```
*å®Ÿè¡Œæ™‚ã®ä½¿ç”¨æ–¹æ³•:* `mbel.T(ctx, "greeting", mbel.Vars{"gender": "male", "name": "ç”°ä¸­"})`

### 4.3 AI ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® `__ai` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚å®Ÿè¡Œæ™‚ã®ãƒ†ã‚­ã‚¹ãƒˆã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ãŒã€ç¿»è¨³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èƒ½åŠ›ã‚’å¤§å¹…ã«å¼·åŒ–ã—ã¾ã™ã€‚

---

## 5. CLI ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³

*   `mbel init`: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã€‚
*   `mbel lint`: æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã€‚
*   `mbel compile`: JSONã¸ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€‚
*   `mbel watch`: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆé–‹ç™ºç”¨ï¼‰ã€‚
*   **`stats`**: çµ±è¨ˆæƒ…å ±ã€‚
*   **`fmt`**: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚

---

## 4. Go SDK ã®çµ±åˆ

### 4.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

*   **Manager**: ä¸­å¤®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚
*   **Runtime**: å®Ÿè¡Œç’°å¢ƒã€‚
*   **Repository**: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚

### 4.2 åˆæœŸåŒ–

```go
import "github.com/yourusername/mbel"

func init() {
    mbel.Init("./locales", mbel.Config{
        DefaultLocale: "ja",
        Watch:         true,
    })
}
```

### 4.3 ä½¿ç”¨æ³• (T é–¢æ•°)

`T` (Translate) é–¢æ•°ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ã¦æ–‡å­—åˆ—ã‚’è§£æ±ºã—ã¾ã™ã€‚

```go
func HandleRequest(w http.ResponseWriter, r *http.Request) {
    ctx := r.Context()

    // 1. ã‚·ãƒ³ãƒ—ãƒ«ãªã‚­ãƒ¼
    title := mbel.T(ctx, "page_title")

    // 2. å¤‰æ•°ä»˜ã
    msg := mbel.T(ctx, "welcome", mbel.Vars{"name": "ä½è—¤"})

    // 3. ãƒ­ã‚¸ãƒƒã‚¯/è¤‡æ•°å½¢
    items := mbel.T(ctx, "cart_items", 5) 
}
```

### 4.4 HTTP ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

MBELã¯ `Accept-Language` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è‡ªå‹•çš„ã«è§£æã—ã¾ã™ã€‚

```go
router.Use(mbel.Middleware)
```
